@model ProdutoViewModel

@{
    Layout = "_Layout";
}

<html>
<head>  
    <link rel="stylesheet" href="../../css/Produtos.css">
    <style>
        .wrapper {
            display: grid;
            grid-template-columns: auto auto auto;
            column-gap: 10px;
            row-gap: 1em;
        }

        .costumitem {
            border: 1px solid rgba(0, 0, 0, 0.2);
            padding: 20px;
            font-size: 15px;
            width: 380px;
            background-color: #e9e4e8;
            border-radius: 15px;
            display: grid;
            align-items: center;
            justify-items: center;
        }

        .center-button{
            margin-top: 10px;
            margin-left: 100px;
        }

        .box {
            width: 40%;
            margin-top: 300px;
            margin-left:500px;
            background: rgba(255,255,255,0.2);
            padding: 35px;
            border: 2px solid #fff;
            border-radius: 20px/50px;
            background-clip: padding-box;
            text-align: center;
        }

        .button {
            font-size: 1em;
            padding: 20px;
            color: #fff;
            border: 2px solid;
            border-radius: 20px/50px;
            text-decoration: none;
            cursor: pointer;
        }

        .overlay {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            transition: opacity 500ms;
            visibility: hidden;
            opacity: 0;
        }

        .overlay:target {
                visibility: visible;
                opacity: 1;
        }

        .popup {
            margin-top: 300px;
            margin-left: 500px;
            padding: 20px;
            background: #fff;
            width: 30%;
            position: relative;
        }

        .popup h2 {
                margin-left: auto;
                margin-right: auto;
                color: #333;
                font-family: Tahoma, Arial, sans-serif;
        }

        .popup .close {
                position: absolute;
                top: 5px;
                right: 10px;
                font-size: 30px;
                font-weight: bold;
                text-decoration: none;
                color: #333;
        }

        .popup .close:hover {
                color: #FF0000;
        }

        .popup .content {
                max-height: 30%;
                overflow: auto;
        }
    </style>
</head>
<body>
    @if (TempData["successBuy"] != null)
    {
        <div class="sucessmessage">
            <span class="alerttext" onclick="this.parentElement.style.display='none';">@TempData["successBuy"]</span>
        </div>
    }
    @if (Model.getTipo().Contains("Empresarial") || Model.getTipo().Contains("Negócios") || Model.getTipo().Contains("Empreendedorismo"))
    {
        <p>
            <button onclick="window.location.href='#popup1'">Inscrição em palestra</button>
        </p>
        <div id="popup1" class="overlay">
            <div class="popup">
                <h2>Inscrito com sucesso.</h2>
                <a class="close" href="#">&times;</a>
                <div class="content">
                    O seu lugar ficou reservado para a palestra.
                </div>
            </div>
        </div>
    }
    @if (Model.getRole().Equals("Cliente"))
    {
        <div class="wrapper">
            @foreach (var produtoitem in Model.getallProdutos())
            {
                <div class="costumitem">
                    <p>
                        <img src=@produtoitem.imagem width="150px" height="150px">
                    </p>
                    <p>
                        <td>@Html.DisplayFor(modelItem => produtoitem.codigo)</td>
                    </p>
                    <p>
                        <td>@Html.DisplayFor(modelItem => produtoitem.nome)</td>
                    </p>
                    <p>
                        Preço: @Html.DisplayFor(modelItem => produtoitem.preco)€
                    </p>
                    @using (Html.BeginForm("addCompra", "Produtos", new { username = TempData["username"], role = TempData["role"], designacao = TempData["designacao"],feira=Model.getFeira()}, FormMethod.Post))
                    {
                       <td>
                            <label for="quantidade">Quantidade:</label>
                            <input type="text" id=@produtoitem.codigo name="quantidade">
                       </td>
                       <input class="center-button" type="submit" id=@produtoitem.codigo onclick="passValue(this.id)" value="Efetuar Pagamento">
                    }
                </div>
            }
        </div>
    }
    @if (Model.getRole().Equals("Expositor"))
    {
        <p>
            @Html.ActionLink("Consultar Registos","Registo","Registo",new {user=Model.getUsername()},null)
            @Html.ActionLink("+ Adicionar Produto","AdicionarProduto","AdicionarProduto",new {user=Model.getUsername()},null)
            @Html.ActionLink("+ Remover Produto","RemoverProduto","RemoverProduto",null,null)
        </p>
        <div class="wrapper">
            @foreach (var produtoitem in Model.getallProdutos())
            {
                <div class="costumitem">
                    <p>
                        <img src=@produtoitem.imagem width="150px" height="150px">
                    </p>
                    <p>
                        <td>@Html.DisplayFor(modelItem => produtoitem.codigo)</td>
                    </p>
                    <p>
                        <td>@Html.DisplayFor(modelItem => produtoitem.nome)</td>
                    </p>
                    <p>
                        Preço: @Html.DisplayFor(modelItem => produtoitem.preco)€
                    </p>
                </div>
            }
        </div>
    }
    <script>
        function passValue(id) {
            document.getElementById(id).value += ";"+id;
        }
    </script>
</body>
</html>
